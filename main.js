(()=>{"use strict";var e,t,n,o,r={866:(e,t,n)=>{n.a(e,(async(e,o)=>{try{n.d(t,{Fb:()=>c,Gu:()=>p,Jm:()=>s,Rx:()=>i,TX:()=>u,U8:()=>r,_o:()=>a,mf:()=>f});var r=function(e,t){return fetch("https://nomoreparties.co/v1/wff-cohort-32/users/me",{method:"PATCH",headers:{authorization:"b41f9f15-f391-43b0-b794-48aea543bfa0","Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})},a=function(e,t){return fetch("https://nomoreparties.co/v1/wff-cohort-32/cards",{method:"POST",headers:{authorization:"b41f9f15-f391-43b0-b794-48aea543bfa0","Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})},c=function(e){return fetch("https://nomoreparties.co/v1/wff-cohort-32/cards/".concat(e),{method:"DELETE",headers:{authorization:"b41f9f15-f391-43b0-b794-48aea543bfa0","Content-Type":"application/json"},body:JSON.stringify({id:e})})},i=function(e){return fetch("https://nomoreparties.co/v1/wff-cohort-32/cards/likes/".concat(e),{method:"PUT",headers:{authorization:"b41f9f15-f391-43b0-b794-48aea543bfa0","Content-Type":"application/json"},body:JSON.stringify({id:e})})},u=function(e){return fetch("https://nomoreparties.co/v1/wff-cohort-32/cards/likes/".concat(e),{method:"DELETE",headers:{authorization:"b41f9f15-f391-43b0-b794-48aea543bfa0","Content-Type":"application/json"},body:JSON.stringify({id:e})})},p=function(e){return fetch("https://nomoreparties.co/v1/wff-cohort-32/users/me/avatar",{method:"PATCH",headers:{authorization:"b41f9f15-f391-43b0-b794-48aea543bfa0","Content-Type":"application/json"},body:JSON.stringify({avatar:e})})},s=await fetch("https://nomoreparties.co/v1/wff-cohort-32/cards",{headers:{authorization:"b41f9f15-f391-43b0-b794-48aea543bfa0"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)})),f=await fetch("https://nomoreparties.co/v1/wff-cohort-32/users/me",{headers:{authorization:"b41f9f15-f391-43b0-b794-48aea543bfa0"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}));o()}catch(e){o(e)}}),1)},694:(e,t,n)=>{n.a(e,(async(e,o)=>{try{n.d(t,{GO:()=>i,Ps:()=>u,zY:()=>p});var r=n(866),a=e([r]);r=(a.then?(await a)():a)[0];var c=document.querySelector("#card-template"),i=function(e,t){return(0,r.Fb)(t),e.remove()},u=function(e){e.classList.toggle("card__like-button_is-active")},p=function(e,t,n,o){var a=c.content.cloneNode(!0),i=a.querySelector(".card__title"),u=a.querySelector(".card__image"),p=a.querySelector(".card__delete-button"),s=a.querySelector(".places__item"),f=a.querySelector(".card__like-button");i.textContent=e.name,u.src=e.link,u.alt="Изображение: ".concat(e.name);var d=a.querySelector(".count-likes");return e.likes?d.textContent=e.likes.length:d.textContent=0,e.likes&&e.likes.some((function(e){return"1bc1bf3083883fb81f64b793"===e._id}))&&f.classList.add("card__like-button_is-active"),f.addEventListener("click",(function(){n(f),f.classList.contains("card__like-button_is-active")?((0,r.Rx)(e._id),d.textContent=+d.textContent+1):((0,r.TX)(e._id),d.textContent=+d.textContent-1)})),u.addEventListener("click",(function(){return o(e)})),e.owner&&"1bc1bf3083883fb81f64b793"!==e.owner._id&&(p.style.display="none"),p.addEventListener("click",(function(){return t(s,e._id)})),a};o()}catch(e){o(e)}}))},947:(e,t,n)=>{n.d(t,{PB:()=>o,cu:()=>i,fs:()=>r});var o=function(e){e.classList.add("popup_is-animated"),e.classList.add("popup_is-opened"),document.addEventListener("keydown",a),document.addEventListener("click",c)},r=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",a),document.removeEventListener("keydown",c)},a=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");r(t)}},c=function(e){e.target.classList.contains("popup_is-opened")&&r(e.target)},i=function(e){e.textContent="Сохранить"}},547:(e,t,n)=>{n.d(t,{F:()=>r});var o=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove("popup__button_inactive")):(t.disabled=!0,t.classList.add("popup__button_inactive"))},r=function(){Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");o(t,n),t.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__input_type_error"),n.classList.remove("popup__input-error_active"),n.textContent=""}(e,t):function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));e.classList.add("popup__input_type_error"),o.textContent=n,o.classList.add("popup__input-error_active")}(e,t,t.validationMessage)}(e,r),o(t,n)}))}))}(e)}))}},497:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var o=n(694),r=n(947),a=n(547),c=n(866),i=e([o,c]);[o,c]=i.then?(await i)():i;var u=document.querySelector(".places__list"),p=document.querySelector(".popup__image"),s=document.querySelector(".popup__caption"),f=document.querySelector(".popup_avatar"),d=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__image"),v=document.querySelector(".popup_type_edit"),m=document.querySelector(".popup_type_new-card"),y=document.querySelector(".popup_type_image"),b=document.querySelector(".popup__input_type_name"),h=document.querySelector(".popup__input_type_description"),S=m.querySelector(".popup__input_type_card-name"),k=m.querySelector(".popup__input_type_url"),q=f.querySelector(".popup__input_avatar_url");l.addEventListener("click",(function(){C(),(0,r.PB)(v)})),d.addEventListener("click",(function(){(0,r.PB)(m)})),_.addEventListener("click",(function(){(0,r.PB)(f)})),v.querySelector(".popup__close").addEventListener("click",(function(){(0,r.fs)(v)})),m.querySelector(".popup__close").addEventListener("click",(function(e){(0,r.fs)(m),S.value="",k.value=""})),y.querySelector(".popup__close").addEventListener("click",(function(){(0,r.fs)(y)})),f.querySelector(".popup__close").addEventListener("click",(function(){(0,r.fs)(f)}));var L=document.querySelector(".profile__title"),x=document.querySelector(".profile__description");L.textContent=c.mf.name,x.textContent=c.mf.about,_.src=c.mf.avatar,_.style="background-image: url(\n  ".concat(c.mf.avatar,"\n  )");var C=function(){b.value=L.textContent,h.value=x.textContent};v.addEventListener("submit",(function(e){e.preventDefault();var t=v.querySelector(".popup__button");t.textContent="Сохранение...",L.textContent=b.value,x.textContent=h.value,(0,c.U8)(b.value,h.value),(0,r.fs)(v),setTimeout((function(){return(0,r.cu)(t)}),1e3)}));var E=function(e){p.src=e.link,s.textContent=e.name,p.alt="Изображение: ".concat(e.name),(0,r.PB)(y)};c.Jm.map((function(e){var t=(0,o.zY)(e,o.GO,o.Ps,E);u.append(t)})),m.addEventListener("submit",(function(e){e.preventDefault();var t=m.querySelector(".popup__button");t.textContent="Сохранение...";var n={name:S.value,link:k.value},a=(0,o.zY)(n,o.GO,o.Ps,E);(0,c._o)(n.name,n.link),u.prepend(a),e.target.reset(),(0,r.fs)(m),setTimeout((function(){return(0,r.cu)(t)}),1e3)})),(0,a.F)(),f.addEventListener("submit",(function(e){e.preventDefault();var t=f.querySelector(".popup__button");t.textContent="Сохранение...",(0,c.Gu)(q.value),console.log(f,t,"123"),_.style="background-image: url(\n  ".concat(q.value,"\n  )"),q.value="",(0,r.fs)(f),setTimeout((function(){return(0,r.cu)(t)}),1e3)})),t()}catch(e){t(e)}}))}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e](n,n.exports,c),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(r,a,c)=>{var i;c&&((i=[]).d=-1);var u,p,s,f=new Set,d=r.exports,l=new Promise(((e,t)=>{s=t,p=e}));l[t]=d,l[e]=e=>(i&&e(i),f.forEach(e),l.catch((e=>{}))),r.exports=l,a((r=>{var a;u=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var a=[];a.d=0,r.then((e=>{c[t]=e,o(a)}),(e=>{c[n]=e,o(a)}));var c={};return c[e]=e=>e(a),c}}var i={};return i[e]=e=>{},i[t]=r,i})))(r);var c=()=>u.map((e=>{if(e[n])throw e[n];return e[t]})),p=new Promise((t=>{(a=()=>t(c)).r=0;var n=e=>e!==i&&!f.has(e)&&(f.add(e),e&&!e.d&&(a.r++,e.push(a)));u.map((t=>t[e](n)))}));return a.r?p:c()}),(e=>(e?s(l[n]=e):p(d),o(i)))),i&&i.d<0&&(i.d=0)},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(497)})();